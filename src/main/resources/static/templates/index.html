<!DOCTYPE html>
<!--[if IE 8]> <html lang="en" class="ie8 no-js"> <![endif]-->
<!--[if IE 9]> <html lang="en" class="ie9 no-js"> <![endif]-->
<!--[if !IE]><!-->
<html lang="en" xmlns:th="http://www.thymeleaf.org">
<html lang="en" class="no-js"> <!--<![endif]-->
<!-- BEGIN HEAD -->
<head>
    <meta charset="utf-8" />
    <title>垃圾分类回收宣传网首页</title>
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta content="width=device-width, initial-scale=1.0" name="viewport" />
    <meta content="" name="description" />
    <meta content="" name="author" />
    <meta name="MobileOptimized" content="320">
    <!-- BEGIN GLOBAL MANDATORY STYLES -->
    <link href="../assets/plugins/font-awesome/css/font-awesome.min.css" rel="stylesheet" type="text/css"/>
    <link href="../assets/plugins/bootstrap/css/bootstrap.min.css" rel="stylesheet" type="text/css"/>
    <link href="../assets/plugins/uniform/css/uniform.default.css" rel="stylesheet" type="text/css"/>
    <!-- END GLOBAL MANDATORY STYLES -->
    <!-- BEGIN THEME STYLES -->
    <link href="../assets/css/style-metronic.css" rel="stylesheet" type="text/css"/>
    <link href="../assets/css/style.css" rel="stylesheet" type="text/css"/>
    <link href="../assets/css/style-responsive.css" rel="stylesheet" type="text/css"/>
    <link href="../assets/css/plugins.css" rel="stylesheet" type="text/css"/>
    <link href="../assets/css/themes/default.css" rel="stylesheet" type="text/css" id="style_color"/>
    <link href="../assets/css/custom.css" rel="stylesheet" type="text/css"/>
    <link href="../assets/css/pages/news.css" rel="stylesheet" type="text/css"/>
    <!-- END THEME STYLES -->
    <link rel="shortcut icon" href="favicon.ico" />
</head>
<!-- END HEAD -->
<!-- BEGIN BODY -->
<body class="page-header-fixed page-full-width">
<!-- BEGIN HEADER -->
<div class="header navbar navbar-inverse navbar-fixed-top">
    <!-- BEGIN TOP NAVIGATION BAR -->
    <div class="header-inner">
        <!-- BEGIN HORIZANTAL MENU -->
        <div class="hor-menu hidden-sm hidden-xs" style="margin-left: 30%">
            <ul class="nav navbar-nav">
                <li class="active">
                    <a href="/index/toIndexPage">
                        首页
                    </a>
                </li>
                <li>
                    <a href="/news/toNewsList">新闻资讯</a>
                </li>
                <li>
                    <a href="/garbageLaw/toLawsList">法律法规</a>
                </li>
                <li>
                    <a href="/index/toDataVisualPage">看数据</a>
                </li>
                <li>
                    <a href="/question/toTestPaper">答题</a>
                </li>
                <li>
                    <a data-toggle="dropdown" data-hover="dropdown" data-close-others="true" class="dropdown-toggle" href="">垃圾分类
                        <i class="fa fa-angle-down"></i>
                    </a>
                    <ul class="dropdown-menu">
                        <li><a href="/garbage/toQueryGarbage">垃圾分类查询</a></li>
                        <li><a href="/garbage/toAllgartbagePage">垃圾分类大全</a></li>
                    </ul>
                </li>
                <li>
                    <span class="hor-menu-search-form-toggler">&nbsp;</span>
                    <div class="search-form">
                        <form class="form-search">
                            <div class="input-group">
                                <input type="text" placeholder="Search..." class="form-control">
                                <div class="input-group-btn">
                                    <button type="button" class="btn"></button>
                                </div>
                            </div>
                        </form>
                    </div>
                </li>
            </ul>
        </div>
        <!-- END HORIZANTAL MENU -->
        <!-- BEGIN RESPONSIVE MENU TOGGLER -->
        <!--        <a href="javascript:;" class="navbar-toggle" data-toggle="collapse" data-target=".navbar-collapse">-->
        <!--            <img src="assets/img/menu-toggler.png" alt="" />-->
        <!--        </a>-->
        <!-- END RESPONSIVE MENU TOGGLER -->
        <!-- BEGIN TOP NAVIGATION MENU -->
        <ul class="nav navbar-nav pull-right" th:object="${session.cur_user}">
            <!-- BEGIN USER LOGIN DROPDOWN -->
            <li class="dropdown user" th:if="${#object!= null}">
                <a href="#" class="dropdown-toggle" data-toggle="dropdown" data-hover="dropdown" data-close-others="true">
                    <img alt="" src="../assets/img/avatar1_small.jpg"/>
                    <span class="username" th:text="${#object.userName}"></span>
                    <i class="fa fa-angle-down"></i>
                </a>
                <ul class="dropdown-menu inlogin">
                    <li><a href="/users/toProfile"><i class="fa fa-user"></i>个人设置</a></li>
                    <li><a href="/wrongQuestion/toWrongQuestionPage"><i class="fa fa-calendar"></i> 我的错题本</a></li>
                    <li class="divider"></li>
                    <li><a href="/users/logout"><i class="fa fa-key"></i>退出登录</a></li>
                </ul>
            </li>
            <!-- END USER LOGIN DROPDOWN -->

            <li class="dropdown user" th:if="${#object== null}">
                <a href="/users/toLogin" class="dropdown-toggle">
                    <img alt="" src="../assets/img/avatar1_small.jpg"/>
                    <span class="username">未登录</span>
                </a>
            </li>
        </ul>
        <!-- END TOP NAVIGATION MENU -->
    </div>
    <!-- END TOP NAVIGATION BAR -->
</div>
<!-- END HEADER -->
<div class="clearfix"></div>
<!-- BEGIN CONTAINER -->
<div class="page-container">
    <!-- BEGIN EMPTY PAGE SIDEBAR -->

    <!-- END EMPTY PAGE SIDEBAR -->
    <!-- BEGIN PAGE -->
    <div class="page-content">
        <div class="row" style="overflow: hidden">
            <div class="col-md-6" style="float: left;margin-bottom:-10000px;padding-bottom:10000px;">

                <div class="col-md-12 slider-box-hover" style="border: 0.5px solid rgb(205,205,205)">
                    <div class="slider-wrapper">
                        <div id="slider" class="nivoSlider">
                            <img src="../images/first.jpg" style="height: 320px"  alt="" title="#slide-caption-1" />
                            <img src="../images/second.jpg" style="height: 320px" alt="" title="#slide-caption-2" />
                        </div>
                        <div id="slide-caption-1" class="nivo-html-caption">
                            <header>
                                <span class="entry-date"> 2020-03-30</span>
                                <h1><a href="/news/queryNewsDetail?newsId=297">西安垃圾分类半年多, 部分小区再次出现垃圾不分类的陋习，不可掉以轻心</a></h1>
                            </header>
                            <p>去年9月1日起，《西安市生活垃圾分类管理办法》正式实施，小区居民们开始转变观念，对生活垃圾进行分类投放。不过近日记者发现，随着时间推移，一些小区垃圾不分类的陋习死灰复燃，垃圾混扔现象亟须引起重视。</p>
                            <span class="entry-author">by:&nbsp;</span><a class="entry-author" href="#">Admin</a>
                        </div>
                        <div id="slide-caption-2" class="nivo-html-caption">
                            <header>
                                <span class="entry-date"> 2020-03-30</span>
                                <h1><a href="/news/queryNewsDetail?newsId=306">南京江心洲，垃圾分类覆盖率已经达到100%</a></h1>
                            </header>
                            <p>说到江心洲，南京人再熟悉不过。历经近十年的开发建设，这个南京过去的“葡萄之乡”，已转型为一座现代化的绿色生态科技岛。</p>
                            <span class="entry-author">by:&nbsp;</span><a class="entry-author" href="#">Admin</a>
                        </div>
                    </div><!--end:slider-wrapper-->
                </div><!--box-hover-->

            </div>
            <div class="col-md-6" style="float: left;margin-bottom:-10000px;padding-bottom:10000px;">
                <div class="portlet box blue">
                    <div class="portlet-title">
                        <div class="caption"><i class="fa fa-bell-o"></i>新闻资讯</div>
                        <div class="center-block">
                            <div class="pull-right">
                                <a href="/news/toNewsList" style="color: white">See All News <i class="m-icon-swapright m-icon-gray"></i></a> &nbsp;
                            </div>
                        </div>
                    </div>
                    <div class="portlet-body">
                        <div class="scroller" data-always-visible="1" data-rail-visible="0">
                            <ul class="feeds" th:fragment="newsShow" id="newsShow">
                                <li th:each="news:${newsEntityList}">
                                    <a th:href="@{'/news/queryNewsDetail?newsId='+${news.newsId}}">
                                        <div class="col1">
                                            <div class="cont">
                                                <div class="cont-col1">
                                                    <div class="label label-sm label-success">
                                                        <i class="fa fa-bar-chart-o"></i>
                                                    </div>
                                                </div>
                                                <div class="cont-col2">
                                                    <div class="desc" th:text="${news.newsTitle}">
                                                    </div>
                                                </div>
                                            </div>
                                        </div>
                                        <div class="col2 date" th:text="${#dates.format(news.newsPubDate,'yyyy-MM-dd')}">
                                        </div>
                                    </a>
                                </li>
                            </ul>
                        </div>
                    </div>
                </div>
            </div>
        </div>
        <!-- BEGIN PAGE CONTENT-->
        <div class="row">
            <div class="col-md-3 sidebar-content ">
                <!-- BEGIN Portlet PORTLET-->
                <div class="portlet box grey">
                    <div class="portlet-title">
                        <div class="caption"><i class="fa fa-reorder"></i>垃圾分类快捷查询</div>
                        <div class="actions">
                            <a href="/garbage/toQueryGarbage" class="btn green btn-sm"><i class="m-icon-swapright m-icon-white"></i> 详细查询</a>
                        </div>
                    </div>
                    <div class="portlet-body" style="height: 427px;">
                        <form class="form-inline" action="#" style="margin-top: 10%">
                            <div class="input-group">
                                <input type="text" class="form-control" placeholder="输入垃圾" id="queryGarbageName">
                                <span class="input-group-btn">
										<button class="btn blue" type="button" onclick="queryGarbage()">GO!</button>
										</span>
                            </div>
                            <!-- /input-group -->
                        </form>
                        <div id="garbageQueryResult" style="display: none;margin-top: 50px;font-size: 20px;"></div>
                    </div>
                </div>
                <!-- END Portlet PORTLET-->

            </div>
            <div class="col-md-9">
                <!-- BEGIN PAGE HEADER-->
                <div class="row">
                    <div class="col-md-12">
                        <!-- BEGIN PAGE TITLE & BREADCRUMB-->
                        <h3 class="page-title">
                            垃圾桶标识
                        </h3>
                        <ul class="page-breadcrumb breadcrumb">
                            <li class="btn-group">
                                <button type="button" class="btn blue dropdown-toggle" data-toggle="dropdown" data-hover="dropdown" data-delay="1000" data-close-others="true">
                                    <span>查看详情</span> </i>
                                </button>
                            </li>
                            <li>
                                四类垃圾
                            </li>
                        </ul>
                        <!-- END PAGE TITLE & BREADCRUMB-->
                    </div>
                </div>
                <!-- END PAGE HEADER-->
                <!-- BEGIN PAGE CONTENT-->
                <div class="row margin-bottom-20">
                    <div class="col-md-3">
                        <div class="thumbnail">
                            <img src="../images/garbage/drugGarbage.jpg" alt="" style="width: 100%; height: 200px;">
                            <div class="caption">
                                <h3>有害垃圾</h3>
                                <p>对人体健康或自然环境造成直接或潜在的危害废弃物。</p><br>
                                <p><a href="/garbage/toAllgartbagePage" class="btn blue">查看该类垃圾</a> </p>
                            </div>
                        </div>
                    </div>
                    <div class="col-md-3">
                        <div class="thumbnail">
                            <img src="../images/garbage/kitchenGarbage.jpg" alt="" style="width: 100%; height: 200px;">
                            <div class="caption">
                                <h3>厨余垃圾</h3>
                                <p>部分地区又称”湿垃圾”，日常生活垃圾产生的容易腐烂的生物质废物。</p>
                                <br>
                                <p><a href="/garbage/toAllgartbagePage" class="btn blue">查看该类垃圾</a> </p>
                            </div>
                        </div>
                    </div>
                    <div class="col-md-3">
                        <div class="thumbnail">
                            <img src="../images/garbage/otherGarbage.jpg" alt="" style="width: 100%; height: 200px;">
                            <div class="caption">
                                <h3>其它垃圾</h3>
                                <p> 部分地区又称”干垃圾”，除有害垃圾、可回收物、湿垃圾以外的生活废弃物。</p>
                                <p><a href="/garbage/toAllgartbagePage" class="btn blue">查看该类垃圾</a> </p>
                            </div>
                        </div>
                    </div>
                    <div class="col-md-3">
                        <div class="thumbnail">
                            <img src="../images/garbage/recyleGarbage.jpg" alt="" style="width: 100%; height: 200px;">
                            <div class="caption">
                                <h3>可回收垃圾</h3>
                                <p>废纸张、废塑料、废玻璃制品、废金属、废织物等适宜回收、可循环利用的生活废弃物</p>
                                <p><a href="/garbage/toAllgartbagePage" class="btn blue">查看该类垃圾</a> </p>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>
        <!-- END PAGE CONTENT-->

        <div class="row">
            <div class="col-md-8">
                <div class="portlet box yellow">
                    <div class="portlet-title">
                        <div class="caption"><i class="fa fa-coffee"></i>数据展示</div>
                        <div class="tools">
                            <a href="javascript:;" class="reload"></a>
                        </div>
                    </div>
                    <div class="portlet-body row" style="height: 380px">
                        <div class="col-md-5" id="showGarbageQueryData" style="height: 350px">

                        </div>
                        <div class="col-md-2"></div>
                        <div class="col-md-5" id="showNewsCountData" style="height: 350px"></div>
                    </div>
                </div>
            </div>
            <div class="col-md-4">
                <div class="portlet">
                    <div class="portlet-title">
                        <div class="caption"><i class="fa fa-book"></i>法律法规</div>
                    </div>
                    <div class="portlet-body">
                        <div class="table-responsive">
                            <table th:fragment="lawsShow" id="lawsShow" class="table table-striped table-bordered table-advance table-hover" style="border: 0px">
                                <thead>
                                    <tr>
                                        <th style="width: 70%;"> 标题</th>
                                        <th style="width: 25%;">时间</th>
                                    </tr>
                                </thead>
                                <tbody >
                                    <tr th:each="laws:${lawsEntityList}">
                                        <td class="highlight" style="text-align: left;width: 70%">
                                            <a th:href="@{'/garbageLaw/queryLawsDetail?lawsId='+${laws.lawId}}" th:text="${laws.lawTitle}"></a>
                                        </td>
                                        <td style="width: 15%;margin-left: 10%">[[${#dates.format(laws.lawPubDate,'yyyy-MM-dd')}]]</td>
                                    </tr>
                                </tbody>
                            </table>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>
    <!-- END PAGE -->
</div>
<div>

</div>
<!-- END CONTAINER -->
<!-- BEGIN FOOTER -->
<div class="footer">
    <div class="footer-inner">
        ysh GraduateProject 2020
    </div>
    <div class="footer-tools">
			<span class="go-top">
			<i class="fa fa-angle-up"></i>
			</span>
    </div>
</div>
<!-- END FOOTER -->
<!-- BEGIN JAVASCRIPTS(Load javascripts at bottom, this will reduce page load time) -->
<!-- BEGIN CORE PLUGINS -->
<!--[if lt IE 9]>
<script src="../assets/plugins/excanvas.min.js"></script>
<script src="../assets/plugins/respond.min.js"></script>
<![endif]-->
<script src="../assets/plugins/jquery-1.10.2.min.js" type="text/javascript"></script>
<script src="../assets/plugins/jquery-migrate-1.2.1.min.js" type="text/javascript"></script>
<script src="../assets/plugins/bootstrap/js/bootstrap.min.js" type="text/javascript"></script>
<script src="../assets/plugins/bootstrap-hover-dropdown/twitter-bootstrap-hover-dropdown.min.js" type="text/javascript" ></script>
<script src="../assets/plugins/jquery-slimscroll/jquery.slimscroll.min.js" type="text/javascript"></script>
<script src="../assets/plugins/jquery.blockui.min.js" type="text/javascript"></script>
<script src="../assets/plugins/jquery.cookie.min.js" type="text/javascript"></script>
<script src="../assets/plugins/uniform/jquery.uniform.min.js" type="text/javascript" ></script>

<link rel="stylesheet" href="../css/reset.css" type="text/css" media="all" />
<link rel="stylesheet" href="../css/nivoslider.css" type="text/css" media="all" />
<link rel="stylesheet" href="../css/prettyPhoto.css" type="text/css" media="screen" />
<link rel="stylesheet" href="../css/style.css" type="text/css" media="screen" />
<link rel="stylesheet" href="../css/responsive.css" type="text/css" media="all" />

<link rel="shortcut icon" href="images/favicon.ico" />
<script type="text/javascript" src="../js/jquery-1.7.1.min.js"></script>
<script type="text/javascript" src="../js/jquery.nivo.slider.pack.js"></script>
<script type="text/javascript" src="../js/jquery.carouFredSel-5.6.2.js"></script>
<script type="text/javascript" src="../js/jquery.prettyPhoto.js"></script>
<script type="text/javascript" src="../js/jquery.sticky.js"></script>
<script type="text/javascript" src="../js/jquery-scroller-v1.min.js"></script>
<script type="text/javascript" src="../js/kendo.web.min.js"></script>
<script type="text/javascript" src="../js/custom.js"></script>
<script src="../assets/scripts/echarts.min.js" type="text/javascript"></script>
<!-- END CORE PLUGINS -->
<script src="../assets/scripts/app.js"></script>
<script>
    jQuery(document).ready(function() {
        getLaws();
        getNews();
        getNewsCountData()
        getGarbageQueryCountData()
        App.init();

    });
    function getNews() {
        var url = '/index/toIndexNewsList';
        $('#newsShow').load(url);
    }

    function getLaws() {
        var lawurl = '/index/toIndexLawsList';
        $('#lawsShow').load(lawurl);

    }
    function queryGarbage() {
        var garbageName=document.getElementById("queryGarbageName").value;
        $.ajax({
            url: "/garbage/queryGarbageByName?garbageName="+garbageName,
            type: 'GET',
            success: function (data) {
                document.getElementById("garbageQueryResult").style.display="block";
                $("#garbageQueryResult").html(data);
            }
        })
    }

    function getNewsCountData() {
        $.ajax({
            url: "/dataVisual/testGetNewsCount",
            type: 'GET',
            success: function (data) {
                var sourceData=[];
                sourceData.push(['score', 'amount', 'product'])
                for(var i=0;i<data.length;i++){
                    var inData=[];
                    var newsCity=data[i].newsCity;
                    var cityNewsNumber=data[i].cityNewsNumber;
                    var seeTimes=data[i].seeTimes;
                    var sumSeeTimes=data[i].sumSeeTimes;
                    var score=seeTimes/sumSeeTimes;
                    inData=[score,cityNewsNumber,newsCity];
                    sourceData.push(inData);
                }
                option = {
                    title: {
                        text: '新闻资讯情况',
                        left: 'center'
                    },
                    dataset: {
                        source: sourceData
                    },
                    grid: {containLabel: true},
                    xAxis: {name: '新闻数量'},
                    yAxis: {type: 'category'},
                    visualMap: {
                        orient: 'horizontal',
                        left: 'center',
                        min: 0,
                        max: 100,
                        text: ['高关注度', '低关注度'],
                        // Map the score column to color
                        dimension: 0,
                        inRange: {
                            color: ['#D7DA8B', '#E15457']
                        }
                    },
                    series: [
                        {
                            type: 'bar',
                            encode: {
                                // Map the "amount" column to X axis.
                                x: 'amount',
                                // Map the "product" column to Y axis
                                y: 'product'
                            }
                        }
                    ]
                };

                //绘制图
                //放入页面
                var myChart = echarts.init(document.getElementById('showNewsCountData'));
                // 使用刚指定的配置项和数据显示图表。
                myChart.setOption(option);
            }
        })
    }

    function getGarbageQueryCountData() {
        $.ajax({
            url: "/dataVisual/testGetGarbageCategoryCount",
            type: 'GET',
            success: function (data) {
                var garbageCategoryName=[];
                var sereisData=[];
                for(var i=0;i<data.length;i++){
                    garbageCategoryName.push(data[i].categoryName);
                    sereisData.push({
                        name:data[i].categoryName,
                        value:data[i].categoryQueryTime
                    })
                }
                option = {
                    title: {
                        text: '垃圾类别查询次数统计',
                        left: 'center'
                    },
                    tooltip: {
                        trigger: 'item',
                        formatter: '{a} <br/>{b} : {c} ({d}%)'
                    },
                    legend: {
                        // orient: 'vertical',
                        // top: 'middle',
                        bottom: 10,
                        left: 'center',
                        data: garbageCategoryName
                    },
                    series: [
                        {
                            type: 'pie',
                            radius: '65%',
                            center: ['50%', '50%'],
                            selectedMode: 'single',
                            data: sereisData,
                            emphasis: {
                                itemStyle: {
                                    shadowBlur: 10,
                                    shadowOffsetX: 0,
                                    shadowColor: 'rgba(0, 0, 0, 0.5)'
                                }
                            }
                        }
                    ]
                };

                //绘制图
                //放入页面
                var myChart = echarts.init(document.getElementById('showGarbageQueryData'));
                // 使用刚指定的配置项和数据显示图表。
                myChart.setOption(option);
            }
        })
    }
</script>
<!-- END JAVASCRIPTS -->
</body>
<!-- END BODY -->
</html>